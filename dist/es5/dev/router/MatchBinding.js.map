{"version":3,"sources":["../../../es6/dev/router/MatchBinding.js"],"names":[],"mappings":"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","file":"MatchBinding.js","sourcesContent":["(function (root, factory) {\n\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(factory);\n    } else if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like environments that support module.exports,\n        // like Node.\n        module.exports = factory();\n    } else {\n        // Browser globals (root is window)\n        root.UrlManager              = root.UrlManager || {};\n        root.UrlManager.MatchBinding = factory();\n    }\n}(this, function () {\n    function MatchBinding(pattern, location) {\n\n        if (location === '') {\n            this.pattern = location = pattern.replace(/^\\(\\/\\)/g, '').replace(/^\\/|$/g, '');\n        } else {\n            this.pattern = pattern;\n            location     = (location + pattern);\n        }\n        this.location = location.replace(/\\((.*?)\\)/g, '$1').replace(/^\\/|$/g, '');\n\n        var route = this.pattern.replace(MatchBinding.ESCAPE_PARAM, '\\\\$&')\n            .replace(MatchBinding.OPTIONAL_PARAM, '(?:$1)?')\n            .replace(MatchBinding.NAMED_PARAM, function (match, optional) {\n                         return optional ? match : '([^\\/]+)';\n                     }).replace(MatchBinding.SPLAT_PARAM, '(.*?)');\n\n        this.patternRegExp = new RegExp('^' + route);\n        this.routeHandler  = [];\n        this.leaveHandler  = [];\n        this.queryHandler  = [];\n        this.routes        = [];\n    }\n\n    MatchBinding.prototype.onBind    = function () {\n    };\n    MatchBinding.prototype.setOnBind = function (onBinding) {\n        this.onBind = onBinding\n    };\n    MatchBinding.prototype.rebind    = function () {\n        if (this.onBind !== undefined) {\n            this.onBind();\n        }\n    };\n\n    MatchBinding.prototype.setRoutes = function (routes) {\n        this.routes.push(routes);\n        return this;\n    };\n\n    MatchBinding.prototype.getRoutes = function () {\n        return this.routes;\n    };\n\n    MatchBinding.prototype.to              = function (routeHandler) {\n        this.routeHandler.push(routeHandler);\n        return this;\n    };\n    MatchBinding.prototype.leave           = function (leaveHandler) {\n        this.leaveHandler.push(leaveHandler);\n        return this;\n    };\n    MatchBinding.prototype.query           = function (queryHandler) {\n        this.queryHandler.push(queryHandler);\n        return this;\n    };\n    MatchBinding.prototype.remove          = function () {\n        this.routes.splice(0, this.routes.length);\n        this.routeHandler.splice(0, this.routeHandler.length);\n        this.leaveHandler.splice(0, this.leaveHandler.length);\n        this.queryHandler.splice(0, this.queryHandler.length);\n        return this;\n    };\n    MatchBinding.prototype.test            = function (location) {\n        return this.patternRegExp.test(location);\n    };\n    MatchBinding.prototype.getFragment     = function (location) {\n        var subLocation = this.applyParams(location);\n        return location.replace(subLocation, '');\n    };\n    MatchBinding.prototype.applyParams     = function (location) {\n        var matches  = this.pattern.replace(/\\((.*?)\\)/g, '$1').split('/');\n        var matches2 = location.split('/');\n        return matches2.splice(0, matches.length).join('/');\n    };\n    MatchBinding.prototype.extractParams   = function (fragment) {\n        var params = this.patternRegExp.exec(fragment).slice(1);\n        return params.map(function (param) {\n            return param ? decodeURIComponent(param) : null;\n        });\n    };\n    MatchBinding.prototype.setSubBinder    = function (subBinder) {\n        this.subBinder = subBinder;\n        return subBinder;\n    };\n    MatchBinding.prototype.getSubBinder    = function () {\n        return this.subBinder;\n    };\n    MatchBinding.prototype.getHandler      = function () {\n        return this.routeHandler;\n    };\n    MatchBinding.prototype.getLeaveHandler = function () {\n        return this.leaveHandler;\n    };\n    MatchBinding.prototype.getQueryHandler = function () {\n        return this.queryHandler;\n    };\n\n    MatchBinding.OPTIONAL_PARAM = /\\((.*?)\\)/g;\n    MatchBinding.NAMED_PARAM    = /(\\(\\?)?:\\w+/g;\n    MatchBinding.SPLAT_PARAM    = /\\*\\w+/g;\n    MatchBinding.ESCAPE_PARAM   = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;\n\n    return MatchBinding;\n}));"]}