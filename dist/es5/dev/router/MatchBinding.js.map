{"version":3,"sources":["../../../es6/dev/router/MatchBinding.js"],"names":[],"mappings":"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","file":"MatchBinding.js","sourcesContent":["(function(root, factory) {\n\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(factory);\n    } else if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like environments that support module.exports,\n        // like Node.\n        module.exports = factory();\n    } else {\n        // Browser globals (root is window)\n        root.UrlManager = root.UrlManager || {};\n        root.UrlManager.MatchBinding = factory();\n    }\n}(this, function() {\n    'use strict';\n    \n    class MatchBinding {\n        constructor(pattern, location) {\n\n            if (location === '') {\n                this.pattern = location = pattern.replace(/^\\(\\/\\)/g, '').replace(/^\\/|$/g, '');\n            } else {\n                this.pattern = pattern;\n                location = (location + pattern);\n            }\n            this.location = location.replace(/\\((.*?)\\)/g, '$1').replace(/^\\/|$/g, '');\n            console.log(this.location, this.pattern);\n\n            let route = this.pattern.replace(MatchBinding.ESCAPE_PARAM, '\\\\$&')\n                .replace(MatchBinding.OPTIONAL_PARAM, '(?:$1)?')\n                .replace(MatchBinding.NAMED_PARAM, function(match, optional) {\n                    return optional ? match : '([^\\/]+)';\n                }).replace(MatchBinding.SPLAT_PARAM, '(.*?)');\n\n            this.patternRegExp = new RegExp('^' + route);\n            this.routeHandler = [];\n            this.leaveHandler = [];\n            this.queryHandler = [];\n            this.routes = [];\n        }\n\n        onBind() {\n        };\n\n        setOnBind(onBinding) {\n            this.onBind = onBinding\n        };\n\n        rebind() {\n            if (this.onBind !== undefined) {\n                this.onBind();\n            }\n        };\n\n        setRoutes(routes) {\n            this.routes.push(routes);\n            return this;\n        };\n\n        getRoutes() {\n            return this.routes;\n        };\n\n        to(routeHandler) {\n            this.routeHandler.push(routeHandler);\n            return this;\n        };\n\n        leave(leaveHandler) {\n            this.leaveHandler.push(leaveHandler);\n            return this;\n        };\n\n        query(queryHandler) {\n            this.queryHandler.push(queryHandler);\n            return this;\n        };\n\n        remove() {\n            this.routes.splice(0, this.routes.length);\n            this.routeHandler.splice(0, this.routeHandler.length);\n            this.leaveHandler.splice(0, this.leaveHandler.length);\n            this.queryHandler.splice(0, this.queryHandler.length);\n            return this;\n        };\n\n        test(location) {\n            return this.patternRegExp.test(location);\n        };\n\n        getFragment(location) {\n            let subLocation = this.applyParams(location);\n            return location.replace(subLocation, '');\n        };\n\n        applyParams(location) {\n            let matches = this.pattern.replace(/\\((.*?)\\)/g, '$1').split('/');\n            let matches2 = location.split('/');\n            return matches2.splice(0, matches.length).join('/');\n        };\n\n        extractParams(fragment) {\n            let params = this.patternRegExp.exec(fragment).slice(1);\n            return params.map(function(param) {\n                return param ? decodeURIComponent(param) : null;\n            });\n        };\n\n        setSubBinder(subBinder) {\n            this.subBinder = subBinder;\n            return subBinder;\n        };\n\n        getSubBinder() {\n            return this.subBinder;\n        };\n\n        getHandler() {\n            return this.routeHandler;\n        };\n\n        getLeaveHandler() {\n            return this.leaveHandler;\n        };\n\n        getQueryHandler() {\n            return this.queryHandler;\n        };\n    };\n    Object.assign(MatchBinding, {\n        OPTIONAL_PARAM: /\\((.*?)\\)/g,\n        NAMED_PARAM:    /(\\(\\?)?:\\w+/g,\n        SPLAT_PARAM:    /\\*\\w+/g,\n        ESCAPE_PARAM:   /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g\n    });\n\n    return MatchBinding;\n}));"]}