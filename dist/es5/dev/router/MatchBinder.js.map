{"version":3,"sources":["../../../es6/dev/router/MatchBinder.js"],"names":["root","factory","define","amd","exports","module","require","UrlManager","MatchBinder","MatchBinding","location","parent","_parent","bindings","Set","_active","reTrigger","pattern","mapHandler","getMatchBinding","binding","setSubBinder","add","match","bind","params","active","size","forEach","concat","clearActive","matched","checkSegment","remove","triggerTo"],"mappings":"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","file":"MatchBinder.js","sourcesContent":["(function(root, factory) {\n\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([\n            './MatchBinding'\n        ], factory);\n    } else if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like environments that support module.exports,\n        // like Node.\n        module.exports = factory(require('./MatchBinding'));\n    } else {\n        // Browser globals (root is window)\n        root.UrlManager = root.UrlManager || {};\n        root.UrlManager.MatchBinder = factory(root.UrlManager.MatchBinding);\n    }\n}(this, function(MatchBinding) {\n    'use strict';\n\n    class MatchBinder {\n        constructor(location, parent) {\n            this._parent = parent;\n            this.bindings = new Set();\n            this.location = location || '';\n            this._active = false;\n\n        }\n\n        reTrigger() {\n            this._parent.reTrigger();\n        };\n\n        match(pattern, mapHandler) {\n            if (typeof pattern === 'function') {\n                mapHandler = pattern;\n                pattern = false;\n            }\n            if (pattern === '') {\n                pattern = false;\n            }\n            return this.getMatchBinding(pattern, mapHandler);\n        };\n\n        getMatchBinding(pattern, mapHandler) {\n            if (pattern) {\n                let binding = new MatchBinding(pattern, this.location, this);\n                binding.setSubBinder(MatchBinder, this.location + (pattern || ''), mapHandler);\n                this.bindings.add(binding);\n                return binding;\n            } else {\n                if (typeof mapHandler === 'function') {\n                    mapHandler(this.match.bind(this));\n                }\n                return {\n                    match: this.match.bind(this)\n                }\n            }\n        };\n\n        clearActive(params, location) {\n            let active = [];\n            if (this.bindings.size > 0) {\n                this.bindings.forEach((binding)=> {\n                    active = active.concat(binding.clearActive(params, location));\n                });\n            }\n            return active;\n        };\n\n        checkStatus(matched, params) {\n            let active = []\n            if (this.bindings.size > 0) {\n                this.bindings.forEach((binding)=> {\n                    active = active.concat(binding.checkSegment(matched, params));\n                });\n            }\n            return active;\n        };\n\n        remove() {\n            if (this.bindings.size > 0) {\n                this.bindings.forEach((binding)=> binding.remove());\n            }\n        };\n\n     \n\n        triggerRoutes(location, params) {\n            if (this.bindings.size > 0) {\n                this.bindings.forEach(binding=>binding.triggerTo(location, params))\n            }\n        }\n    }\n\n    return MatchBinder;\n}));\n"]}